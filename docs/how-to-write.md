# 記事の書き方
## 目次
- [記事の書き方](#記事の書き方)
  - [目次](#目次)
  - [はじめに](#はじめに)
  - [フォルダ(ディレクトリ)構成について](#フォルダディレクトリ構成について)
    - [主なフォルダの役割](#主なフォルダの役割)
  - [記事の記述方法](#記事の記述方法)
    - [markdownファイルの作成](#markdownファイルの作成)
    - [記事のヘッダーの書き方](#記事のヘッダーの書き方)
    - [本文を書く](#本文を書く)
    - [画像の挿入](#画像の挿入)
    - [vscode内でのプレビュー](#vscode内でのプレビュー)
    - [記事が書けたら](#記事が書けたら)

## はじめに
まずは開発環境を整備しましょう。[README.md](../README.md#環境構築) 環境構築についてはこちらを参照してください！  

## フォルダ(ディレクトリ)構成について
サイト開発にはAstroという静的サイト向けのフレームワークを使っています。複数のファイルを組み合わせてページを作れたり、Markdown形式でページを書くことができたりするので便利です。  

### 主なフォルダの役割
- `src/` コード本体を置く
  - `contents/` 
    - `blog/` Markdown, MDXで書かれた記事データを置く
    - `authors/` 著者のプロフィールを置く
  - `assets/` 記事内に貼るもの以外の画像等のアセットを置く
    - (ここに置いた画像は自動で最適化処理が行われる。)
  - `pages/`  
    - 実際に表示されるページを格納する場所
- `public/`
  - ここに置いたものはそのままの形で公開される。最適化処理をかけたくない画像やバイナリファイルなどを置く

## 記事の記述方法
### markdownファイルの作成
`src/contents/blog/` にフォルダを作成しましょう。名前は管理しやすいように `YYYYMMDD_タイトル` のようにしてください。  
例: `20250430_new-hp`

作成したフォルダの中に `index.md` という名前のファイルを作れば、あとは記事を書くだけです！   

### 記事のヘッダーの書き方
既存の記事を見てもらうと分かりますが、mdファイルの先頭(=本文の前)には`---`で囲まれたスペースがあります。この部分にはタイトル、公開日、著者名、カテゴリ、タグ、サムネイル(記事一覧に表示される画像)などの記事のメタデータを書きます。

```yaml
---
title: "ホームページが新しくなりました！"
pubdate: 2025-04-30
authors: ["haru"] 
category: "活動報告"
tags: ["HP", "web"] 
coverImage: "./thumbnail.jpg"
---

本文...
```

有効なフィールドは以下の通りです。

| フィールド名 | 必須 | 説明 |
| --- | --- | --- |
| `title` | 〇 | 記事のタイトル |
| `description` | ✕ | 記事の説明文(ない場合は自動生成されます) |
| `pubdate` | 〇 | 公開日(YYYY-MM-DD形式) |
| `authors` | 〇 | 著者名(配列で) |
| `category` | 〇 | カテゴリ(例: 活動報告) |
| `tags` | 〇 | タグ(配列で) |
| `coverImage` | ✕ | 記事のサムネイル画像(相対パス) |
| `updated` | ✕ | 更新日(YYYY-MM-DD形式) |
| `draft` | ✕ | 記事リストに載せるかどうか(true/false) |

### 本文を書く
本文はMarkdown形式で書きます。書き方はいろんな所に乗っているのでここでの説明は割愛しますが、[こちらのページ](https://uucactus.com/blog/19000101/)で一通りの機能を確認できます。

### 画像の挿入
各記事で使う画像はindex.mdと同じフォルダに置いてください。　　
画像を挿入する場合は以下のように相対パスで指定します。

```markdown
![説明テキスト](./image.png)
```

例: `![カクタ君の画像](./cactakun.png)`

### vscode内でのプレビュー
VSCode内での記事のプレビューは、`Markdown Preview Enhanced`という拡張機能を使うと便利です。初回起動時にインストールを促す画面が出るのでそこから入れるか、拡張機能のタブから検索してインストールしてください。  
拡張機能が入ると.mdファイルを開いた画面の右上に虫眼鏡アイコンがついた `Open Preview to the Side` というボタンが出てくるので、それを押すとプレビューが表示されます。
または `Ctrl + Shift + V` でプレビューを開くこともできます。

### 記事が書けたら
記事が書けたらCommit, Pushして反映されるのを待ちましょう！  

また、実際にローカルでサイトを動かして確認することもできます。
```bash
pnpm run dev
```
これでローカルサーバーが立ち上がるので、出てくるリンクをクリックするか `http://localhost:4321/` にアクセスしてみてください。これが開発環境のサイトです。